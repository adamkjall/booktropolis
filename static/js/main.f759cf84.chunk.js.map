{"version":3,"sources":["components/Card.js","components/SearchBox.js","common/services.js","actions.js","constants.js","containers/App.js","reducers.js","index.js"],"names":["Card","_ref","id","isFlipped","handleClick","book","title","description","book_image","rank","author","publisher","rank_last_week","weeks_on_list","primary_isbn13","amazon_product_url","react_default","a","createElement","className","onClick","react_card_flip_default","key","src","alt","href","target","rel","SearchBox","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","textInput","React","createRef","current","focus","_this$props","handleKeyPress","searchChange","type","placeholder","onChange","onKeyPress","event","ref","Component","nyt_apiKey","fetchCurrentBestSellers","fetch","concat","then","response","json","data","results","books","dateToString","date","year","getFullYear","month","getMonth","day","getDate","hasImage","requestBestSellersByDate","dispatch","dateString","fetchBestSellersByDate","payload","catch","error","requestBooksBySearch","search","items","map","volumeInfo","undefined","authors","join","imageLinks","thumbnail","industryIdentifiers","identifier","filter","console","log","searchForBook","App","onDateChange","newDate","onSetDate","onRequestBestSellersByDate","handleSearch","onRequestBooksBySearch","searchField","toLowerCase","setState","inSearchMode","resetStartPage","Date","onRequestCurrentBestSellers","state","UTC","setUTCDate","getUTCDate","getUTCDay","yearStart","getUTCFullYear","weekNo","Math","ceil","onSearchChange","onCardFlip","isPending","_this$getWeekNumber","getWeekNumber","_this$getWeekNumber2","slicedToArray","week","components_SearchBox","entry_default","value","format","minDetail","maxDate","required","i","components_Card","connect","searchBooks","changeDate","requestBooks","updateFlippedCards","updateDate","flipCard","initialStateSearch","initialStateDate","initialStateBooks","initialStateFlippedCards","prevCardId","logger","createLogger","rootReducer","combineReducers","arguments","length","action","objectSpread","cardId","newIsFlipped","slice","store","createStore","applyMiddleware","thunkMiddleware","ReactDOM","render","es","src_containers_App","document","getElementById"],"mappings":"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","file":"static/js/main.f759cf84.chunk.js","sourcesContent":["import React from \"react\";\r\nimport ReactCardFlip from \"react-card-flip\";\r\n\r\nconst Card = ({ id, isFlipped, handleClick, book }) => {\r\n  const {\r\n    title,\r\n    description,\r\n    book_image,\r\n    rank,\r\n    author,\r\n    publisher,\r\n    rank_last_week,\r\n    weeks_on_list,\r\n    primary_isbn13,\r\n    amazon_product_url\r\n  } = book;\r\n\r\n  return (\r\n    <div\r\n      id={id}\r\n      className=\"bg-light-gray br3 ba b--black w-70 w-40-m w-20-l ma3 shadow-5 grow pointer\"\r\n      onClick={() => handleClick(id)}\r\n    >\r\n      <ReactCardFlip isFlipped={isFlipped}>\r\n        <div key=\"front\">\r\n          <img\r\n            className=\"br3 br--top w-100\"\r\n            src={book_image}\r\n            alt=\"book cover\"\r\n          />\r\n          <div className=\"pa2\">\r\n            <h3 className=\"mv0\">\r\n              <b>{rank && \"#\" + rank + \" \"}</b>\r\n              {title}\r\n            </h3>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"br3 br--top pa3\" key=\"back\">\r\n          <div className=\"pa2\">\r\n            <h3 className=\"mv0\">\r\n              <b>{rank && \"#\" + rank + \" \"}</b>\r\n              {title}\r\n            </h3>\r\n            <h5 className=\"mv1\">By<b> {author}</b></h5>\r\n            <hr />\r\n            <p>{description}</p>\r\n            <hr />\r\n            <div className=\"tl\">\r\n              {rank_last_week ? (\r\n                <div>\r\n                  <b>Rank last week</b>: {rank_last_week}\r\n                </div>\r\n              ) : null}\r\n              <b>Weeks on list:</b> {weeks_on_list} <br />\r\n              <b>Publisher:</b> {publisher} <br />\r\n              <b>ISBN:</b> {primary_isbn13} <br />\r\n              <br />\r\n              <a\r\n                href={amazon_product_url}\r\n                target=\"_blank\"\r\n                rel=\"noopener noreferrer\"\r\n              >\r\n                Get it on Amazon\r\n              </a>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </ReactCardFlip>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Card;\r\n","import React from \"react\";\r\n\r\nclass SearchBox extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.textInput = React.createRef();\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.textInput.current.focus();\r\n  }\r\n\r\n  render() {\r\n    const { handleKeyPress, searchChange } = this.props;\r\n    return (\r\n      <input\r\n        className=\"bg-lightest-blue br3 ba b--black bw1 pa2-ns pa1 ma2 shadow\"\r\n        type=\"search\"\r\n        placeholder=\" Search for books\"\r\n        onChange={searchChange}\r\n        onKeyPress={event => handleKeyPress(event)}\r\n        ref={this.textInput}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default SearchBox;\r\n","/*************************** \r\n NEW YORK TIMES API\r\n****************************/\r\nconst nyt_apiKey = \"IoNgBtPcB2BAFBogGs0w6VxskM9amKDP\";\r\n\r\nexport const fetchCurrentBestSellers = () => {\r\n  return fetch(\r\n    `https://api.nytimes.com/svc/books/v3/lists/current/hardcover-fiction.json?api-key=${nyt_apiKey}`\r\n  )\r\n    .then(response => response.json())\r\n    .then(data => data.results.books);\r\n};\r\n\r\nexport const fetchBestSellersByDate = date => {\r\n  if (!date) return fetchCurrentBestSellers();\r\n\r\n  const dateString = dateToString(date);\r\n  return fetch(\r\n    `https://api.nytimes.com/svc/books/v3/lists/${dateString}/hardcover-fiction.json?api-key=${nyt_apiKey}`\r\n  )\r\n    .then(response => response.json())\r\n    .then(data => data.results.books);\r\n};\r\n\r\nconst dateToString = date => {\r\n  const year = date.getFullYear();\r\n  // increment month by one because getMonth() starts from zero\r\n  const month =\r\n    date.getMonth() < 10 ? \"0\" + (date.getMonth() + 1) : date.getMonth() + 1;\r\n  const day = date.getDate() < 10 ? \"0\" + date.getDate() : date.getDate();\r\n  return `${year}-${month}-${day}`;\r\n};\r\n\r\n/*************************** \r\n GOOGLE BOOKS API\r\n****************************/\r\nconst google_apiKey = \"AIzaSyB9wQyJ2N2x9z15nzvO5g-9o-eV_ZLkOkI\";\r\n\r\nexport const searchForBook = search => {\r\n  const maxResult = 20;\r\n  return fetch(\r\n    `https://www.googleapis.com/books/v1/volumes?q=${search}&maxResults=${maxResult}&key=${google_apiKey}`\r\n  )\r\n    .then(response => response.json())\r\n    .then(data =>\r\n      data.items.map(book => ({\r\n        title: book.volumeInfo.title,\r\n        description: book.volumeInfo.description,\r\n        author:\r\n          book.volumeInfo.authors === undefined\r\n            ? \"\"\r\n            : book.volumeInfo.authors.join(\", \"),\r\n        book_image:\r\n          book.volumeInfo.imageLinks === undefined\r\n            ? null\r\n            : book.volumeInfo.imageLinks.thumbnail,\r\n        publisher: book.volumeInfo.publisher,\r\n        primary_isbn13:\r\n          book.volumeInfo.industryIdentifiers === undefined\r\n            ? \"\"\r\n            : book.volumeInfo.industryIdentifiers[0].identifier\r\n      }))\r\n    )\r\n    .then(books => books.filter(hasImage))\r\n    .catch(console.log);\r\n};\r\n\r\nfunction hasImage(book) {\r\n  return book.book_image !== null;\r\n}\r\n","import {\r\n  CHANGE_SEARCH_FIELD,\r\n  CHANGE_DATE,\r\n  REQUEST_BOOKS_PENDING,\r\n  REQUEST_BOOKS_SUCCESS,\r\n  REQUEST_BOOKS_FAILED,\r\n  FLIP_CARD,\r\n  RESET_FLIPPED_CARDS,\r\n} from \"./constants\";\r\n\r\nimport {\r\n  fetchCurrentBestSellers,\r\n  fetchBestSellersByDate,\r\n  searchForBook\r\n} from \"./common/services\";\r\n\r\nexport const setSearchField = text => ({\r\n  type: CHANGE_SEARCH_FIELD,\r\n  payload: text\r\n});\r\n\r\nexport const updateDate = date => ({\r\n  type: CHANGE_DATE,\r\n  payload: date\r\n});\r\n\r\nexport const requestCurrentBestSellers = () => dispatch => {\r\n  dispatch({ type: REQUEST_BOOKS_PENDING });\r\n  dispatch({ type: RESET_FLIPPED_CARDS });\r\n  fetchCurrentBestSellers()\r\n    .then(data => dispatch({ type: REQUEST_BOOKS_SUCCESS, payload: data }))\r\n    .catch(error => dispatch({ type: REQUEST_BOOKS_FAILED, payload: error }));\r\n};\r\n\r\nexport const requestBestSellersByDate = date => dispatch => {\r\n  dispatch({ type: REQUEST_BOOKS_PENDING });\r\n  dispatch({ type: RESET_FLIPPED_CARDS });\r\n  fetchBestSellersByDate(date)\r\n    .then(data => dispatch({ type: REQUEST_BOOKS_SUCCESS, payload: data }))\r\n    .catch(error => dispatch({ type: REQUEST_BOOKS_FAILED, payload: error }));\r\n};\r\n\r\nexport const requestBooksBySearch = search => dispatch => {\r\n  dispatch({ type: REQUEST_BOOKS_PENDING });\r\n  dispatch({ type: RESET_FLIPPED_CARDS });\r\n  searchForBook(search)\r\n    .then(data => dispatch({ type: REQUEST_BOOKS_SUCCESS, payload: data }))\r\n    .catch(error => dispatch({ type: REQUEST_BOOKS_FAILED, payload: error }));\r\n};\r\n\r\nexport const flipCard = id => ({\r\n  type: FLIP_CARD,\r\n  payload: id\r\n});\r\n","export const CHANGE_SEARCH_FIELD = \"CHANGE_SEARCH_FIELD\";\r\n\r\nexport const CHANGE_DATE = \"CHANGE DATE\";\r\n\r\nexport const REQUEST_BOOKS_PENDING = \"REQUEST_BOOKS_PENDING\";\r\nexport const REQUEST_BOOKS_SUCCESS = \"REQUEST_BOOKS_SUCCESS\";\r\nexport const REQUEST_BOOKS_FAILED = \"REQUEST_BOOKS_FAILED\";\r\n\r\nexport const FLIP_CARD = \"FLIP_CARD\";\r\nexport const RESET_FLIPPED_CARDS = \"RESET_FLIPPED_CARDS\";\r\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport DatePicker from \"react-date-picker\";\nimport Card from \"../components/Card\";\nimport SearchBox from \"../components/SearchBox\";\n\nimport \"./App.css\";\nimport \"bootstrap/dist/css/bootstrap.css\";\n\nimport {\n  setSearchField,\n  updateDate,\n  requestCurrentBestSellers,\n  requestBestSellersByDate,\n  requestBooksBySearch,\n  flipCard\n} from \"../actions\";\n\nconst mapStateToProps = state => ({\n  searchField: state.searchBooks.searchField,\n  date: state.changeDate.date,\n  books: state.requestBooks.books,\n  isPending: state.requestBooks.isPending,\n  error: state.requestBooks.error,\n  isFlipped: state.updateFlippedCards.isFlipped\n});\n\nconst mapDispatchToProps = dispatch => ({\n  onSearchChange: event => dispatch(setSearchField(event.target.value)),\n  onSetDate: date => dispatch(updateDate(date)),\n  onRequestCurrentBestSellers: () => dispatch(requestCurrentBestSellers()),\n  onRequestBestSellersByDate: date => dispatch(requestBestSellersByDate(date)),\n  onRequestBooksBySearch: search => dispatch(requestBooksBySearch(search)),\n  onCardFlip: id => dispatch(flipCard(id))\n});\n\nclass App extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      inSearchMode: false\n    };\n  }\n  componentDidMount() {\n    this.props.onRequestCurrentBestSellers();\n  }\n\n  onDateChange = newDate => {\n    this.props.onSetDate(newDate);\n    this.props.onRequestBestSellersByDate(newDate);\n  };\n\n  handleSearch = () => {\n    this.props.onRequestBooksBySearch(this.props.searchField.toLowerCase());\n  };\n\n  handleKeyPress = event => {\n    if (event.key === \"Enter\") {\n      console.log(\"hellooooo\");\n      this.handleSearch();\n      this.setState({ inSearchMode: true });\n    }\n  };\n\n  resetStartPage = () => {\n    this.props.onSetDate(new Date());\n    this.props.onRequestCurrentBestSellers();\n    this.setState({ inSearchMode: false });\n  };\n\n  getWeekNumber(date) {\n    // Copy date so don't modify original\n    date = new Date(\n      Date.UTC(date.getFullYear(), date.getMonth(), date.getDate())\n    );\n    // Set to nearest Thursday: current date + 4 - current day number\n    // Make Sunday's day number 7\n    date.setUTCDate(date.getUTCDate() + 4 - (date.getUTCDay() || 7));\n    // Get first day of year\n    var yearStart = new Date(Date.UTC(date.getUTCFullYear(), 0, 1));\n    // Calculate full weeks to nearest Thursday\n    var weekNo = Math.ceil(((date - yearStart) / 86400000 + 1) / 7);\n    // Return array of year and week number\n    return [date.getUTCFullYear(), weekNo];\n  }\n\n  render() {\n    const {\n      onSearchChange,\n      onCardFlip,\n      books,\n      isPending,\n      date,\n      isFlipped\n    } = this.props;\n    const [year, week] = this.getWeekNumber(this.props.date);\n    return (\n      <div className=\"tc \">\n        <h1\n          className=\"f-headline-ns f-subheadline pointer mh3 mb4-ns mb1 mt2-ns mt4\"\n          onClick={this.resetStartPage}\n        >\n          Booktropolis\n        </h1>\n        <div className=\"flex justify-center mb1\">\n          <div className=\"\">\n            <button\n              className=\"b--none f5-ns f7 link ph3 pv2 bg-green br3 shadow ma2 b pointer grow\"\n              onClick={this.resetStartPage}\n            >\n              BEST SELLERS\n            </button>\n            <button className=\"b--none f5-ns f7 link dim ph3 pv2 bg-moon-gray br3 shadow ma2 b pointer grow\">\n              FAVORITES\n            </button>\n            <button className=\"b--none f5-ns f7 link ph3 pv2 bg-green br3 shadow ma2 b pointer grow\">\n              REGISTER\n            </button>\n          </div>\n        </div>\n        <div className=\"justify-center\">\n          <SearchBox\n            searchChange={onSearchChange}\n            handleKeyPress={this.handleKeyPress}\n          />\n        </div>\n\n        {!this.state.inSearchMode ? (\n          <div className=\"flex flex-wrap justify-center mt3 mb3 mh2\">\n            <h2 className=\"f2-ns f3\">\n              New York Times Best Sellers week {week} {year}{\" \"}\n            </h2>\n            <div className=\"mt2\">\n              <DatePicker\n                className=\"br3 pa1-ns ba b--black bw1 ml3\"\n                onChange={this.onDateChange}\n                value={date}\n                format=\" d / M / y \"\n                minDetail=\"decade\"\n                maxDate={new Date()}\n                required={true}\n              />\n            </div>\n          </div>\n        ) : <h2 className=\"f2-ns f3 mt4 mb3\">\n        Search results:\n      </h2>}\n        <div className=\"flex flex-wrap justify-center\">\n          {isPending ? (\n            <h1 className=\"f1-ns f2 mt4 mb3\">Loading...</h1>\n          ) : books ? (\n            books.map((book, i) => (\n              <Card\n                key={i}\n                id={i}\n                isFlipped={isFlipped[i]}\n                handleClick={onCardFlip}\n                book={book}\n              />\n            ))\n          ) : null}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(App);\n","import {\r\n  CHANGE_SEARCH_FIELD,\r\n  CHANGE_DATE,\r\n  REQUEST_BOOKS_PENDING,\r\n  REQUEST_BOOKS_SUCCESS,\r\n  REQUEST_BOOKS_FAILED,\r\n  FLIP_CARD,\r\n  RESET_FLIPPED_CARDS\r\n} from \"./constants\";\r\n\r\nconst initialStateSearch = {\r\n  searchField: \"\"\r\n};\r\n\r\nexport const searchBooks = (state = initialStateSearch, action = {}) => {\r\n  switch (action.type) {\r\n    case CHANGE_SEARCH_FIELD:\r\n      return { ...state, searchField: action.payload };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst initialStateDate = {\r\n  date: new Date()\r\n};\r\n\r\nexport const changeDate = (state = initialStateDate, action = {}) => {\r\n  switch (action.type) {\r\n    case CHANGE_DATE:\r\n      return { ...state, date: action.payload };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst initialStateBooks = {\r\n  isPending: false,\r\n  books: [],\r\n  error: \"\"\r\n};\r\n\r\nexport const requestBooks = (state = initialStateBooks, action = {}) => {\r\n  switch (action.type) {\r\n    case REQUEST_BOOKS_PENDING:\r\n      return { ...state, isPending: true };\r\n    case REQUEST_BOOKS_SUCCESS:\r\n      return { ...state, isPending: false, books: action.payload };\r\n    case REQUEST_BOOKS_FAILED:\r\n      return { ...state, isPending: false, error: action.payload };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst initialStateFlippedCards = {\r\n  isFlipped: [],\r\n  prevCardId: -1\r\n};\r\n\r\nexport const updateFlippedCards = (\r\n  state = initialStateFlippedCards,\r\n  action = {}\r\n) => {\r\n  switch (action.type) {\r\n    case FLIP_CARD:\r\n      const cardId = action.payload;\r\n      const newIsFlipped = state.isFlipped.slice();\r\n\r\n      newIsFlipped[cardId] = !newIsFlipped[cardId];\r\n\r\n      if (state.prevCardId !== -1 && cardId !== state.prevCardId) {\r\n        newIsFlipped[state.prevCardId] = !newIsFlipped[cardId];\r\n      }\r\n      return { ...state, isFlipped: newIsFlipped, prevCardId: cardId };\r\n    case RESET_FLIPPED_CARDS:\r\n      return { ...state, isFlipped: [], prevCardId: -1}\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport { createStore, applyMiddleware, combineReducers } from \"redux\";\nimport { createLogger } from \"redux-logger\";\nimport thunkMiddleware from \"redux-thunk\";\nimport \"./index.css\";\n\nimport App from \"./containers/App\";\nimport {\n  searchBooks,\n  requestBooks,\n  changeDate,\n  updateFlippedCards\n} from \"./reducers\";\nimport \"tachyons\";\n\nconst logger = createLogger();\n\nconst rootReducer = combineReducers({\n  searchBooks,\n  requestBooks,\n  changeDate,\n  updateFlippedCards\n});\nconst store = createStore(\n  rootReducer,\n  applyMiddleware(thunkMiddleware, logger)\n);\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}