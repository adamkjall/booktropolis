(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{42:function(e,t,n){e.exports=n(84)},51:function(e,t,n){},81:function(e,t,n){},84:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(9),c=n.n(o),l=n(19),i=n(6),s=n(37),u=n(38),p=(n(51),n(41)),d=n(16),h=n(17),m=n(20),E=n(18),f=n(21),b=n(39),v=n.n(b),S=n(40),g=n.n(S),y=function(e){var t=e.id,n=e.isFlipped,a=e.handleClick,o=e.book,c=o.title,l=o.description,i=o.book_image,s=o.rank,u=o.author,p=o.publisher,d=o.rank_last_week,h=o.weeks_on_list,m=o.primary_isbn13,E=o.amazon_product_url;return r.a.createElement("div",{id:t,className:"bg-near-white br3 ba b--black w-60 w-40-m w-20-l ma3 shadow-5 grow pointer",onClick:function(){return a(t)}},r.a.createElement(g.a,{isFlipped:n},r.a.createElement("div",{key:"front"},r.a.createElement("img",{className:"br3 br--top w-100",src:i,alt:"book cover"}),r.a.createElement("div",{className:"pa2"},r.a.createElement("h3",{className:"mv0"},s&&"#"+s+" ",c))),r.a.createElement("div",{className:"br3 br--top pa3",key:"back"},r.a.createElement("div",{className:"pa2"},r.a.createElement("h3",{className:"mv0"},s&&"#"+s+" ",c),r.a.createElement("h4",{className:"mv1"},"By ",u),r.a.createElement("p",null,l),r.a.createElement("hr",null),r.a.createElement("div",{className:"tl"},d?r.a.createElement("div",null,r.a.createElement("b",null,"Rank last week"),": ",d):null,r.a.createElement("b",null,"Weeks on list:")," ",h," ",r.a.createElement("br",null),r.a.createElement("b",null,"Publisher:")," ",p," ",r.a.createElement("br",null),r.a.createElement("b",null,"ISBN:")," ",m," ",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("a",{href:E,target:"_blank",rel:"noopener noreferrer"},"Get it on Amazon"))))))},k=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(m.a)(this,Object(E.a)(t).call(this,e))).textInput=r.a.createRef(),n}return Object(f.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.textInput.current.focus()}},{key:"render",value:function(){var e=this.props,t=e.handleKeyPress,n=e.searchChange;return r.a.createElement("input",{className:"br3 ba b--black bw1 pa2 ma2 shadow",type:"search",placeholder:" Search for books",onChange:n,onKeyPress:function(e){return t(e)},ref:this.textInput})}}]),t}(r.a.Component),C=(n(81),n(82),"IoNgBtPcB2BAFBogGs0w6VxskM9amKDP"),_=function(){return fetch("https://api.nytimes.com/svc/books/v3/lists/current/hardcover-fiction.json?api-key=".concat(C)).then(function(e){return e.json()}).then(function(e){return e.results.books})},D=function(e){var t=e.getFullYear(),n=e.getMonth()<10?"0"+(e.getMonth()+1):e.getMonth()+1,a=e.getDate()<10?"0"+e.getDate():e.getDate();return"".concat(t,"-").concat(n,"-").concat(a)};function O(e){return null!==e.book_image}var w=function(e){return function(t){t({type:"REQUEST_BOOKS_PENDING"}),t({type:"RESET_FLIPPED_CARDS"}),function(e){if(!e)return _();var t=D(e);return fetch("https://api.nytimes.com/svc/books/v3/lists/".concat(t,"/hardcover-fiction.json?api-key=").concat(C)).then(function(e){return e.json()}).then(function(e){return e.results.books})}(e).then(function(e){return t({type:"REQUEST_BOOKS_SUCCESS",payload:e})}).catch(function(e){return t({type:"REQUEST_BOOKS_FAILED",payload:e})})}},I=function(e){return function(t){t({type:"REQUEST_BOOKS_PENDING"}),t({type:"RESET_FLIPPED_CARDS"}),function(e){return fetch("https://www.googleapis.com/books/v1/volumes?q=".concat(e,"&maxResults=").concat(20,"&key=").concat("AIzaSyB9wQyJ2N2x9z15nzvO5g-9o-eV_ZLkOkI")).then(function(e){return e.json()}).then(function(e){return e.items.map(function(e){return{title:e.volumeInfo.title,description:e.volumeInfo.description,author:void 0===e.volumeInfo.authors?"":e.volumeInfo.authors.join(", "),book_image:void 0===e.volumeInfo.imageLinks?null:e.volumeInfo.imageLinks.thumbnail,publisher:e.volumeInfo.publisher,primary_isbn13:void 0===e.volumeInfo.industryIdentifiers?"":e.volumeInfo.industryIdentifiers[0].identifier}})}).then(function(e){return e.filter(O)}).catch(console.log)}(e).then(function(e){return t({type:"REQUEST_BOOKS_SUCCESS",payload:e})}).catch(function(e){return t({type:"REQUEST_BOOKS_FAILED",payload:e})})}},N=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(m.a)(this,Object(E.a)(t).call(this))).onDateChange=function(t){e.props.onSetDate(t),e.props.onRequestBestSellersByDate(t)},e.handleSearch=function(){e.props.onRequestBooksBySearch(e.props.searchField.toLowerCase())},e.handleKeyPress=function(t){"Enter"===t.key&&(console.log("hellooooo"),e.handleSearch(),e.setState({inSearchMode:!0}))},e.resetStartPage=function(){e.props.onSetDate(new Date),e.props.onRequestCurrentBestSellers(),e.setState({inSearchMode:!1})},e.state={inSearchMode:!1},e}return Object(f.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.props.onRequestCurrentBestSellers()}},{key:"getWeekNumber",value:function(e){(e=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()))).setUTCDate(e.getUTCDate()+4-(e.getUTCDay()||7));var t=new Date(Date.UTC(e.getUTCFullYear(),0,1)),n=Math.ceil(((e-t)/864e5+1)/7);return[e.getUTCFullYear(),n]}},{key:"render",value:function(){var e=this.props,t=e.onSearchChange,n=e.onCardFlip,a=e.books,o=e.isPending,c=e.date,l=e.isFlipped,i=this.getWeekNumber(this.props.date),s=Object(p.a)(i,2),u=s[0],d=s[1];return r.a.createElement("div",{className:"tc"},r.a.createElement("h1",{className:" w-100 f-headline mv3 pointer",onClick:this.resetStartPage},"Booktropolis"),r.a.createElement("div",{className:"flex justify-center items-center"},r.a.createElement("div",{className:"mt3"},r.a.createElement("a",{className:"f6 link ph3 pv2  dib white bg-green br3 shadow ma2 b pointer grow",onClick:this.resetStartPage},"BEST SELLERS"),r.a.createElement("a",{className:"f6 link dim ph3 pv2  dib white bg-moon-gray br3 shadow ma2 b pointer grow"},"FAVORITES"),r.a.createElement("a",{className:"f6 link ph3 pv2  dib white bg-dark-green br3 shadow ma2 b pointer grow"},"REGISTER"))),r.a.createElement("div",null,r.a.createElement(k,{searchChange:t,handleKeyPress:this.handleKeyPress})),this.state.inSearchMode?r.a.createElement("h2",{className:"f2"},"Search results:"):r.a.createElement("div",{className:"flex flex-wrap justify-center items-center"},r.a.createElement("h2",{className:"f2"},"New York Times Best Sellers week ",d," ",u," "),r.a.createElement("div",{className:"mt2"},r.a.createElement(v.a,{className:"br3 pa1 ba b--black bw1 ml3",onChange:this.onDateChange,value:c,format:" d / M / y ",minDetail:"decade",maxDate:new Date,required:!0}))),r.a.createElement("div",{className:"flex flex-wrap justify-center"},o?r.a.createElement("h1",null,"Loading"):a?a.map(function(e,t){return r.a.createElement(y,{key:t,id:t,isFlipped:l[t],handleClick:n,book:e})}):null))}}]),t}(r.a.Component),B=Object(l.b)(function(e){return{searchField:e.searchBooks.searchField,date:e.changeDate.date,books:e.requestBooks.books,isPending:e.requestBooks.isPending,error:e.requestBooks.error,isFlipped:e.updateFlippedCards.isFlipped}},function(e){return{onSearchChange:function(t){return e({type:"CHANGE_SEARCH_FIELD",payload:t.target.value})},onSetDate:function(t){return e(function(e){return{type:"CHANGE DATE",payload:e}}(t))},onRequestCurrentBestSellers:function(){return e(function(e){e({type:"REQUEST_BOOKS_PENDING"}),e({type:"RESET_FLIPPED_CARDS"}),_().then(function(t){return e({type:"REQUEST_BOOKS_SUCCESS",payload:t})}).catch(function(t){return e({type:"REQUEST_BOOKS_FAILED",payload:t})})})},onRequestBestSellersByDate:function(t){return e(w(t))},onRequestBooksBySearch:function(t){return e(I(t))},onCardFlip:function(t){return e(function(e){return{type:"FLIP_CARD",payload:e}}(t))}}})(N),R=n(4),F={searchField:""},j={date:new Date},P={isPending:!1,books:[],error:""},T={isFlipped:[],prevCardId:-1},U=(n(83),Object(s.createLogger)()),A=Object(i.c)({searchBooks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"CHANGE_SEARCH_FIELD":return Object(R.a)({},e,{searchField:t.payload});default:return e}},requestBooks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"REQUEST_BOOKS_PENDING":return Object(R.a)({},e,{isPending:!0});case"REQUEST_BOOKS_SUCCESS":return Object(R.a)({},e,{isPending:!1,books:t.payload});case"REQUEST_BOOKS_FAILED":return Object(R.a)({},e,{isPending:!1,error:t.payload});default:return e}},changeDate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"CHANGE DATE":return Object(R.a)({},e,{date:t.payload});default:return e}},updateFlippedCards:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"FLIP_CARD":var n=t.payload,a=e.isFlipped.slice();return a[n]=!a[n],-1!==e.prevCardId&&n!==e.prevCardId&&(a[e.prevCardId]=!a[n]),Object(R.a)({},e,{isFlipped:a,prevCardId:n});case"RESET_FLIPPED_CARDS":return Object(R.a)({},e,{isFlipped:[],prevCardId:-1});default:return e}}}),L=Object(i.d)(A,Object(i.a)(u.a,U));c.a.render(r.a.createElement(l.a,{store:L},r.a.createElement(B,null)),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.37bdb694.chunk.js.map