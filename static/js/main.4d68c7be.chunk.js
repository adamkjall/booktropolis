(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(10),o=a.n(l),s=a(28),c=a(17),i=a(46),u=a(47),m=(a(61),a(62),a(51)),h=a(12),p=a(13),d=a(15),E=a(14),f=a(16),b=a(48),g=a.n(b),v=a(49),S=a.n(v),y=function(e){var t=e.id,a=e.isFlipped,n=e.handleClick,l=e.book,o=l.title,s=l.description,c=l.book_image,i=l.rank,u=l.author,m=l.publisher,h=l.rank_last_week,p=l.weeks_on_list,d=l.primary_isbn13,E=l.amazon_product_url;return r.a.createElement("div",{id:t,className:"bg-light-gray br3 ba b--black ma2 w-70 w-40-m w5-l shadow-5 grow pointer",onClick:function(){return n(t)}},r.a.createElement(S.a,{isFlipped:a},r.a.createElement("div",{key:"front"},r.a.createElement("img",{className:"br3 br--top w-100",src:c,alt:"book cover"}),r.a.createElement("div",{className:"pa2"},r.a.createElement("h2",{className:"mv0"},r.a.createElement("b",null,i&&"#"+i+" "),o))),r.a.createElement("div",{className:"br3 br--top pa3",key:"back"},r.a.createElement("div",{className:"pa2"},r.a.createElement("h1",{className:"mv0"},r.a.createElement("b",null,i&&"#"+i+" "),o),r.a.createElement("h3",{className:"mv1"},"By",r.a.createElement("b",null," ",u)),r.a.createElement("hr",null),r.a.createElement("p",null,s),r.a.createElement("hr",null),r.a.createElement("div",{className:"tl"},h?r.a.createElement("div",null,r.a.createElement("b",null,"Rank last week"),": ",h):null,r.a.createElement("b",null,"Weeks on list:")," ",p," ",r.a.createElement("br",null),r.a.createElement("b",null,"Publisher:")," ",m," ",r.a.createElement("br",null),r.a.createElement("b",null,"ISBN:")," ",d," ",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("a",{href:E,target:"_blank",rel:"noopener noreferrer"},"Get it on Amazon"))))))},k=a(9),O=a(103),C=a(104),_=a(105),D=a(106),N=a(107),w=a(108),B=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(E.a)(t).call(this,e))).textInput=r.a.createRef(),a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.textInput.current.focus()}},{key:"render",value:function(){var e=this.props,t=e.handleKeyPress,a=e.searchChange;return r.a.createElement("input",{className:"bg-lightest-blue br3 ba b--black bw1 pa1 mt3 mt2-l shadow",type:"search",placeholder:"Search for books",onChange:a,onKeyPress:function(e){return t(e)},ref:this.textInput})}}]),t}(r.a.Component),I=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(E.a)(t).call(this,e))).toggle=a.toggle.bind(Object(k.a)(a)),a.state={isOpen:!1},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"toggle",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"render",value:function(){var e=this.props,t=e.searchChange,a=e.handleKeyPress,n=e.handleShowBestSellers;return r.a.createElement("div",null,r.a.createElement(O.a,{color:"muted",light:!0,expand:"lg"},r.a.createElement(C.a,{href:"/"},r.a.createElement("h1",{className:"f-subheadline-ns f1 ma1 ml3 ml3-l mr1-l mr3-m"},"Booktropolis")),r.a.createElement(_.a,{className:"mt3",onClick:this.toggle}),r.a.createElement(D.a,{isOpen:this.state.isOpen,navbar:!0},r.a.createElement(N.a,{className:"ml-auto center w-auto",navbar:!0},r.a.createElement(w.a,{onClick:n},r.a.createElement("h1",{className:"f2-ns f3 ma0 bb bw1 pointer"},"Best sellers")),r.a.createElement(w.a,{className:"mt-auto ml3-l mr2-l"},r.a.createElement("h1",{className:"f2-ns f3 ma0 bb bw1 pointer"},"Favorites"))),r.a.createElement(N.a,{className:"ml-auto center",navbar:!0},r.a.createElement(w.a,null,r.a.createElement(B,{searchChange:t,handleKeyPress:a})),r.a.createElement(w.a,null,r.a.createElement("h1",{className:"f3-ns f4 ma0 ml3-ns ml2 mt2"},"Register")),r.a.createElement(w.a,null,r.a.createElement("h1",{className:"f3-ns f4 ma0 ml3-ns ml2 mt2"},"Login"))))))}}]),t}(r.a.Component),F=(a(99),"IoNgBtPcB2BAFBogGs0w6VxskM9amKDP"),j=function(){return fetch("https://api.nytimes.com/svc/books/v3/lists/current/hardcover-fiction.json?api-key=".concat(F)).then(function(e){return e.json()}).then(function(e){return e.results.books})},R=function(e){var t=e.getFullYear(),a=e.getMonth()<10?"0"+(e.getMonth()+1):e.getMonth()+1,n=e.getDate()<10?"0"+e.getDate():e.getDate();return"".concat(t,"-").concat(a,"-").concat(n)};function P(e){return null!==e.book_image}var T=function(e){return function(t){t({type:"REQUEST_BOOKS_PENDING"}),t({type:"RESET_FLIPPED_CARDS"}),function(e){if(!e)return j();var t=R(e);return fetch("https://api.nytimes.com/svc/books/v3/lists/".concat(t,"/hardcover-fiction.json?api-key=").concat(F)).then(function(e){return e.json()}).then(function(e){return e.results.books})}(e).then(function(e){return t({type:"REQUEST_BOOKS_SUCCESS",payload:e})}).catch(function(e){return t({type:"REQUEST_BOOKS_FAILED",payload:e})})}},U=function(e){return function(t){t({type:"REQUEST_BOOKS_PENDING"}),t({type:"RESET_FLIPPED_CARDS"}),function(e){return fetch("https://www.googleapis.com/books/v1/volumes?q=".concat(e,"&maxResults=").concat(20,"&key=").concat("AIzaSyB9wQyJ2N2x9z15nzvO5g-9o-eV_ZLkOkI")).then(function(e){return e.json()}).then(function(e){return e.items.map(function(e){return{title:e.volumeInfo.title,description:e.volumeInfo.description,author:void 0===e.volumeInfo.authors?"":e.volumeInfo.authors.join(", "),book_image:void 0===e.volumeInfo.imageLinks?null:e.volumeInfo.imageLinks.thumbnail,publisher:e.volumeInfo.publisher,primary_isbn13:void 0===e.volumeInfo.industryIdentifiers?"":e.volumeInfo.industryIdentifiers[0].identifier}})}).then(function(e){return e.filter(P)}).catch(console.log)}(e).then(function(e){return t({type:"REQUEST_BOOKS_SUCCESS",payload:e})}).catch(function(e){return t({type:"REQUEST_BOOKS_FAILED",payload:e})})}},A=function(e){function t(){var e;return Object(h.a)(this,t),(e=Object(d.a)(this,Object(E.a)(t).call(this))).onDateChange=function(t){e.props.onSetDate(t),e.props.onRequestBestSellersByDate(t)},e.handleSearch=function(){e.props.onRequestBooksBySearch(e.props.searchField.toLowerCase())},e.handleKeyPress=function(t){"Enter"===t.key&&(console.log("hellooooo"),e.handleSearch(),e.setState({inSearchMode:!0}))},e.showBestSellers=function(){e.props.onSetDate(new Date),e.props.onRequestCurrentBestSellers(),e.setState({inSearchMode:!1})},e.state={inSearchMode:!1},e}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.onRequestCurrentBestSellers()}},{key:"getWeekNumber",value:function(e){(e=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()))).setUTCDate(e.getUTCDate()+4-(e.getUTCDay()||7));var t=new Date(Date.UTC(e.getUTCFullYear(),0,1)),a=Math.ceil(((e-t)/864e5+1)/7);return[e.getUTCFullYear(),a]}},{key:"render",value:function(){var e=this.props,t=e.onSearchChange,a=e.onCardFlip,n=e.books,l=e.isPending,o=e.date,s=e.isFlipped,c=this.getWeekNumber(this.props.date),i=Object(m.a)(c,2),u=i[0],h=i[1];return r.a.createElement("div",{className:"center tc w-90-ns"},r.a.createElement(I,{searchChange:t,handleKeyPress:this.handleKeyPress,handleShowBestSellers:this.showBestSellers}),this.state.inSearchMode?r.a.createElement("h2",{className:"f2 mt3 mb2"},"Search results:"):r.a.createElement("div",{className:"mt3 mb3 mh2"},r.a.createElement("h3",{className:"f2-ns f3"},"New York Times Best Sellers week ",h," ",u," "),r.a.createElement("div",{className:"mt2"},r.a.createElement(g.a,{style:{color:"blue"},className:"br3 pa1-ns ba b--black bw1",onChange:this.onDateChange,value:o,format:"d / M / y",minDetail:"decade",maxDate:new Date,required:!0,clearIcon:null,showLeadingZeros:!1}))),r.a.createElement("div",{className:"flex flex-wrap justify-center"},l?r.a.createElement("h1",{className:"f1-ns f2 mt4 mb3"},"Loading..."):n?n.map(function(e,t){return r.a.createElement(y,{key:t,id:t,isFlipped:s[t],handleClick:a,book:e})}):r.a.createElement("h2",{className:"f3 mt3"},"No results found :(")))}}]),t}(r.a.Component),K=Object(s.b)(function(e){return{searchField:e.searchBooks.searchField,date:e.changeDate.date,books:e.requestBooks.books,isPending:e.requestBooks.isPending,error:e.requestBooks.error,isFlipped:e.updateFlippedCards.isFlipped}},function(e){return{onSearchChange:function(t){return e({type:"CHANGE_SEARCH_FIELD",payload:t.target.value})},onSetDate:function(t){return e(function(e){return{type:"CHANGE DATE",payload:e}}(t))},onRequestCurrentBestSellers:function(){return e(function(e){e({type:"REQUEST_BOOKS_PENDING"}),e({type:"RESET_FLIPPED_CARDS"}),j().then(function(t){return e({type:"REQUEST_BOOKS_SUCCESS",payload:t})}).catch(function(t){return e({type:"REQUEST_BOOKS_FAILED",payload:t})})})},onRequestBestSellersByDate:function(t){return e(T(t))},onRequestBooksBySearch:function(t){return e(U(t))},onCardFlip:function(t){return e(function(e){return{type:"FLIP_CARD",payload:e}}(t))}}})(A),L=a(8),q={searchField:""},M={date:new Date},Q={isPending:!1,books:[],error:""},x={isFlipped:[],prevCardId:-1},G=(a(100),Object(i.createLogger)()),H=Object(c.c)({searchBooks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"CHANGE_SEARCH_FIELD":return Object(L.a)({},e,{searchField:t.payload});default:return e}},requestBooks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"REQUEST_BOOKS_PENDING":return Object(L.a)({},e,{isPending:!0});case"REQUEST_BOOKS_SUCCESS":return Object(L.a)({},e,{isPending:!1,books:t.payload});case"REQUEST_BOOKS_FAILED":return Object(L.a)({},e,{isPending:!1,error:t.payload});default:return e}},changeDate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"CHANGE DATE":return Object(L.a)({},e,{date:t.payload});default:return e}},updateFlippedCards:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"FLIP_CARD":var a=t.payload,n=e.isFlipped.slice();return n[a]=!n[a],-1!==e.prevCardId&&a!==e.prevCardId&&(n[e.prevCardId]=!n[a]),Object(L.a)({},e,{isFlipped:n,prevCardId:a});case"RESET_FLIPPED_CARDS":return Object(L.a)({},e,{isFlipped:[],prevCardId:-1});default:return e}}}),z=Object(c.d)(H,Object(c.a)(u.a,G));o.a.render(r.a.createElement(s.a,{store:z},r.a.createElement(K,null)),document.getElementById("root"))},52:function(e,t,a){e.exports=a(101)},61:function(e,t,a){},99:function(e,t,a){}},[[52,1,2]]]);
//# sourceMappingURL=main.4d68c7be.chunk.js.map